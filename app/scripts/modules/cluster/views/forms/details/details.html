
<script>
  
  // autofocus project name
  $( '#ngm-project-name' ).focus();

  // init selects
  $( 'select' ).material_select();

  // init textarea
  $( 'textarea' ).height( $('textarea')[0].scrollHeight );

</script>

<!-- bind html -->
<div class="row">
	<div class="col s12 m12 l12">
		<div class="card">
			<ul id="project_details_form" class="collection with-header">
				
				<li class="collection-header blue lighten-4">
					<h5 class="report-work-title">
						<i class="material-icons left">playlist_add</i>Project Details
					</h5>
				</li>

				<li class="collection-item avatar" >
					
					<!-- form -->

					<div class="row"> 

						<div class="card" style="padding:20px;">

						<!-- project details -->
				      <div class="row">
				        <div class="input-field col s12 m6">
				          <input id="ngm-project-name" type="text" class="validate"
										ng-model="project.definition.project_title"
										ng-disabled="project.definition.project_status === 'complete'"
										required>
				          <label for="ngm-project-name">Project Title</label>
				        </div>
				        
				        <!-- input-date directive -->
				        <div class="input-field col s12 m3">
									<label for="ngm-start-date">Start Date</label>
									<input ngm-date
									    type="text"
									    name="created"
									    id="ngm-start-date"
									    ng-model="project.definition.project_start_date"
									    format="dd mmm, yyyy"
									    select-years="15"
									    max="{{ project.definition.project_end_date }}"
									    on-close="project.datepicker.onClose()"/>
				        </div>

				        <!-- input-date directive -->
				        <div class="input-field col s12 m3">
				          <label for="ngm-end-date">End Date</label>
									<input ngm-date
									    type="text"
									    name="created"
									    id="ngm-start-date"
									    ng-model="project.definition.project_end_date"
									    format="dd mmm, yyyy"
									    select-years="15"
									    min="{{ project.definition.project_start_date }}"
									    on-close="project.datepicker.onClose()"/>				          
				        </div>
				      </div>

				      <!-- project budget -->
				      <div class="row">

<!-- 
				        <div class="input-field col s12 m6">
				          <input id="ngm-project-code" type="text" class="validate"
				          	ng-model="project.definition.project_code"
				          	ng-disabled="project.definition.project_status === 'complete'">
				          <label for="ngm-project-code">Project Code</label>
				        </div>
 -->

				        <div class="input-field col s12 m6"
				        	ng-class="{ 'error-label': healthProjectForm.$submitted && !project.definition.activity_type }">
				          <select class="validate"
				          	id="ngm-activity_type"
				          	ng-model="project.definition.activity_type"
				          	ng-model-options="{ trackBy: '$value.activity_type_id'}"
				          	ng-disabled="project.definition.project_status === 'complete'"
										ng-options="activities.activity_type_id as activities.activity_type_name for activities in project.options.list.activities.activity_type"
				          	required>
				          	<option value="" disabled selected>Select Activity Type</option>
				          </select>
				          <label for="ngm-activity_type">Activity Type</label>
				        </div>

				        <!-- budget currency -->
				        <div>

					        <div class="input-field col s12 m3">
					          <input id="ngm-project-budget" type="number" class="validate" min="1"
					          	ng-model="project.definition.project_budget"
					          	ng-disabled="project.definition.project_status === 'complete'"
					          	required>
					          <label for="ngm-project-budget">Project Budget ( ${{ project.definition.project_budget_currency | uppercase }} )</label>
					        </div>

					        <div class="input-field col s12 m3"
					        	ng-class="{ 'error-label': healthProjectForm.$submitted && !project.definition.project_budget_currency }">
								    <select class="validate"
								    	id="ngm-project_budget_currency"
								    	ng-model="project.definition.project_budget_currency"
								    	ng-model-options="{ trackBy: '$value.currency_id'}"
								    	ng-disabled="project.definition.project_status === 'complete'" 
											ng-options="currency.currency_id as currency.currency_name for currency in project.options.list.currencies"
								    	required>
								      <option value="" disabled selected>Select Project Budget Currency</option>
								    </select>
								    <label for="ngm-project_budget_currency">Project Budget Currency</label>
					        </div>

				        </div>

				      </div>

				      <!-- activity description / project donor  -->
				      <div class="row" ng-if="project.definition.activity_type">

				      	<!-- Activity descirption -->
				      	<div class="input-field col s12 m6" style="padding-bottom:15px;"
				      				ng-class="{ 'error-label': healthProjectForm.$submitted && !project.activity_description_valid() }">
				      		<label>Activity Description</label>
				      		
				      		<!-- label padding -->
				      		<div style="padding-bottom:35px;"></div>				      		
				      		
				      		<!-- for activity_description -->
							    <p ng-repeat="a in project.options.list.activities.activity_description track by $index">
							      <input type="checkbox" id="activity_{{ a.activity_description_id }}" 
							      ng-model="project.definition.activity_description_check[ a.activity_description_id ]"
							      ng-disabled="project.definition.project_status === 'complete'"/>
							      <label for="activity_{{ a.activity_description_id }}">{{ a.activity_description_name }}</label>
							    </p>

							  </div>	  

							  <!-- project donor -->
				      	<div class="input-field col s12 m6" style="padding-bottom:15px;"
				      				ng-class="{ 'error-label': healthProjectForm.$submitted && !project.project_donor_valid() }">
				      		<label>Project Donor</label>
				      		<!-- label padding -->
				      		<div style="padding-bottom:35px;"></div>

				      		<p ng-repeat="donor in project.options.list.donors track by $index">
							      <input type="checkbox" id="donor_{{ donor.donor_id }}" 
								      ng-model="project.definition.project_donor_check[ donor.donor_id ]"
								      ng-disabled="project.definition.project_status === 'complete'"/>
							      <label for="donor_{{ donor.donor_id }}">{{ donor.donor_name }}</label>
				      		</p>

							  </div>

							  <!--  Other Types -->
								<div class="input-field col s12 m6"
											ng-show="project.definition.activity_description_check.other">
				          <input 
				          		id="ngm-project-activity_description_other" type="text"
											ng-model="project.definition.activity_description_other"
				        			ng-class="{ 'valid' : project.definition.activity_description_other }"
											ng-disabled="!project.definition.activity_description_check.other || project.definition.project_status === 'complete'">
				          <label for="ngm-project-activity_description_other">List Other Activity Description</label>
								</div>

								<!--  Other Donors -->
								<div class="input-field col s12 m6"
											ng-show="project.definition.project_donor_check.other && !project.definition.activity_description_check.other">
									<p></p>
								</div>								

				        <div class="input-field col s12 m6"
				        			ng-show="project.definition.project_donor_check.other">
				          <input 
				          		id="ngm-project-project_donor_other" type="text"
											ng-model="project.definition.project_donor_other"
				        			ng-class="{ 'valid' : project.definition.project_donor_other }"
											ng-disabled="!project.definition.project_donor_check.other || project.definition.project_status === 'complete'">
				          <label for="ngm-project-project_donor_other">List Other Donors</label>
				       	</div>							  

				      </div>

							<!-- other partners -->
							<div class="row">
							
				        <div class="input-field col s12 m6" style="padding-bottom:35px;">
				        	<label>Project Partners</label>
				        	<br/>
				        	<p style="padding-top:10px;">
					        	<input type="checkbox" id="ngm-project-other_partbers"
					        		ng-model="project.definition.implementing_partners_checked"
					        		ng-disabled="project.definition.project_status === 'complete'"/>
					          <label for="ngm-project-other_partbers">Other Implementing Partners?</label>
					        </p>
				        </div>

				        <div style="padding-top:25px;">
					        <div class="input-field col s12 m6"
					        		ng-class="{ 'has-error' : healthProjectForm.implementing_partners_list.$error.pattern }"
					        		ng-show="project.definition.implementing_partners_checked">
					          <input 
					          		id="ngm-project-implementing_partners" 
					          		type="text" 
					          		class="validate"
					          		name="implementing_partners_list"
												ng-model="project.definition.implementing_partners">
					          <label for="ngm-project-implementing_partners">List Project Partners</label>
					        </div>
					       </div>
				      </div>

				      <!-- project description -->
							<div class="row">
				        <div class="input-field col s12 m12 l12">
				          <textarea id="ngm-project-description" type="text" class="validate materialize-textarea"
										ng-model="project.definition.project_description"
										ng-disabled="project.definition.project_status === 'complete'"
										required>
									</textarea>
				          <label for="ngm-project-description">Project Description & Objectives</label>
				        </div>
				      </div>

			      </div>
		      </div>

				</li>
			</ul>

		</div>
	</div>
</div>
