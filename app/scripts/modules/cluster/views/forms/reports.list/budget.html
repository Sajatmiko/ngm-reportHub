
<!-- bind html -->
<div class="row">
	<div class="col s12">
		<div class="card">
			<ul class="collection with-header">
				
				<li class="collection-header teal lighten-4">
					<h5 class="report-work-title">
						<i class="material-icons left">attach_money</i>Project Budget Progress
					</h5>
				</li>

				<li class="collection-item avatar">
					
	      	<!-- budget input -->
					<div class="row" style="padding-top:10px;">
						
						<!-- project budget -->		        
		        <div class="input-field col s12 m4">
		          <input id="ngm-project-budget-currency_monthly" type="number" class="validate"
		          	ng-model="project.definition.project_budget"
		          	disabled>
		          <label for="ngm-project-budget-currency_monthly">Project Budget ( ${{ project.definition.project_budget_currency | uppercase }} )</label>
		        </div>	        

		        <!-- budget recieved -->
		        <div class="input-field col s12 m4">
		          <input id="ngm-project-budget_progress_usd" type="number" class="validate" min="0"
		          	ng-model="project.budget.project_budget_amount_recieved"
		          	ng-disabled="project.definition.project_status === 'complete'">
		          <label for="ngm-project-budget_progress_usd" class="active">Budget Recieved Amount ( ${{ project.definition.project_budget_currency | uppercase }} )</label>
		        </div>

		        <!-- input-date directive -->
		        <div class="input-field col s12 m3">
							<label for="ngm-budget-recieved-date">Budget Recieved Date</label>
							<input ngm-date
							    type="text"
							    name="created"
							    id="ngm-budget-recieved-date"
							    ng-model="project.budget.project_budget_date_recieved"
							    format="dd mmm, yyyy"
							    select-years="15"
							    max="{{ project.datepicker.maxDate }}"
							    on-close="project.datepicker.onClose()"/>
		        </div>		        

		        <!-- add circle -->
	      		<div class="col s12 m1" style="padding-top:15px;">
	      			<button class="waves-effect waves-light btn-floating green lighten-2 right" 
	      					title="Add Budget Recieved Date"
	      					ng-show="project.definition.project_status !== 'complete'"
	      					ng-click="project.saveBudgetLine()"
	      					ng-disabled="project.budget.project_budget_amount_recieved < 1">
	      					<i class="material-icons">add</i>
	      			</button>
					  </div>

		      </div>

		      <!-- budget progress -->
		      <div class="row">
					 	<div class="col s12" ng-show="project.definition.project_budget_progress.length">
							<h5 class="report-selected-locations">{{ project.definition.project_budget_progress.length }} Budget Progress Updates</h5>
						</div>
					</div>

					<!-- single items -->
					<div class="row" style="padding-left:40px;"
								ng-repeat="budget in project.definition.project_budget_progress | orderBy:'-project_budget_date_recieved' track by $index">
						<div class="col s12 m11 left">
				    	<!-- health cluster -->
				    	<h5 class="report-budget-title">
									<i class="material-icons left" style="color: teal;">date_range</i>
									${{ budget.project_budget_amount_recieved | number }} {{ project.definition.project_budget_currency | uppercase }} of Budget Recieved on {{ budget.project_budget_date_recieved | date:'longDate' }}
							</h5>
						</div>
						<div class="col s12 m1 right" style="padding-top:15px;padding-right:12px;">
							<a class="waves-effect waves-light btn-floating red lighten-2 right"
					      	title="Remove budget item for {{ budget.project_budget_date_recieved | date:'longDate' }}"
					      	ng-if="project.definition.project_status !== 'complete'"
					      	ng-click="project.removeBudgetItem( $index )"><i class="material-icons">clear</i>
					     </a>
						</div>
					</div>

					<!-- totals -->
					<div class="row" style="padding-left:40px;">
						<div class="col s12 left" style="border-top: 1px solid #e0e0e0;" 
							ng-show="project.definition.project_budget_progress.length">
				    	<h5 class="report-budget-title">
									<i class="material-icons left" style="color: teal;">attach_money</i>
									${{ project.definition.project_budget_progress | sumByKey:'project_budget_amount_recieved' | number  }} {{ project.definition.project_budget_currency | uppercase }} Recieved of <span style="font-weight: 400">${{ project.definition.project_budget | number  }} {{ project.definition.project_budget_currency | uppercase }}</span> Budget Total
							</h5>							
						</div>
					</div>

				</li>

			</ul>
		</div>
	</div>
</div>