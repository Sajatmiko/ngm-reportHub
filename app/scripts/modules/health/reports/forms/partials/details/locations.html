
<!-- bind html -->
<div class="row">
	<div class="col s12 m12 l12">
		<div class="card">
			<ul class="collection with-header">
				<li class="collection-header"><h5 class="report-work-title">Project Locations</h5></li>
				<li class="collection-item avatar" >
					
					<!-- form -->

		      <div class="row">

	      		<div class="input-field col s12 m3"
	      			ng-class="{ 'error-label': healthProjectForm.$submitted 
					  								&& !project.options.selection.province 
					  								&& project.definition.locations.length === 0 }">
	      			<select id="ngm-project-province" class="validate"
					    	ng-model="project.options.selection.province"
					    	ng-change="project.locationSelect('#ngm-project-district', 'district')"
	      				ng-options="item as item.prov_name for item in project.options.select.provinces track by item.prov_code">
	      				<option value="" disabled selected>Choose Province</option>
	      			</select>
	      			<label>Province</label>
	      		</div>

	      		<div class="input-field col s12 m3"
	      			ng-class="{ 'error-label': healthProjectForm.$submitted 
					  								&& !project.options.selection.district 
					  								&& project.definition.locations.length === 0 }">
	      			<select id="ngm-project-district" class="validate"
					    	ng-model="project.options.selection.district"
					    	ng-change="project.locationSelect('#ngm-project-hf_type', 'hf_type')"
	      				ng-options="item as item.dist_name for item in project.options.select.districts track by item.dist_code"
	      				disabled>
	      				<option value="" disabled selected>Choose District</option>
	      			</select>
	      			<label>District</label>
	      		</div>

					  <div class="input-field col s12 m3"
					  	ng-class="{ 'error-label': healthProjectForm.$submitted 
					  								&& !project.options.selection.hf_type
					  								&& project.definition.locations.length === 0 }">
					    <select id="ngm-project-hf_type" class="validate"
					    	ng-model="project.options.selection.hf_type"
					    	ng-change="project.locationSelect('#ngm-project-hf_name', 'hf_name')"
					    	ng-options="item as item.fac_type for item in project.options.select.hf_type track by item.id"
					    	disabled>
					      <option value="" disabled selected>Choose facility type</option>
					    </select>
					    <label>Facility Type</label>
					  </div>

					  <div class="input-field col s12 m3"
					  	ng-class="{ 'error-label': healthProjectForm.$submitted 
					  								&& !project.options.selection.hf_name
					  								&& project.definition.locations.length === 0 }">
					    <select id="ngm-project-hf_name"  class="validate"
					    	ng-model="project.options.selection.hf_name"
					    	ng-change="project.addLocation()"
					    	ng-options="item as item.fac_name for item in project.options.select.hf_name track by item.fac_id"
					    	disabled>
					      <option value="" disabled selected>Choose facility name</option>
					    </select>
					    <label>Facility Name</label>
					  </div>

					 </div>

					 <div class="row" ng-if="project.definition.locations.length">

						  <h5 class="report-work-title" style="font-size:1.1rem;">{{ project.definition.locations.length }} Selected Locations</h5>

			      	<!-- table for location -->
				      <table class="centered" style="margin-left:10px; width:98%">
				        <tbody>
				          <tr ng-repeat="location in project.definition.locations track by $index">
				          	<td width="5%"><i class="material-icons" style="color: teal;">location_on</i></td>
				            <td width="22%">{{ location.prov_name }}</td>
				            <td width="22%">{{ location.dist_name }}</td>
				            <td width="22%">{{ location.fac_type }}</td>
				            <td width="22%">{{ location.fac_name }}</td>
				            <td width="5%"><a class="waves-effect waves-light btn red lighten-2" 
				            	ng-if="project.definition.details.project_status !== 'complete'"
				            	ng-click="project.removeLocation($index)"><i class="material-icons">cancel</i></a></td>
				          </tr>
				        </tbody>
				      </table>
				            	
		      </div>

				</li>
			</ul>

		</div>
	</div>
</div>
