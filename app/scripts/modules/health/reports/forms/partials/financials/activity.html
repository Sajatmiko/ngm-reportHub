
<!-- bind html -->
<div class="row">
	<div class="col s12 m12 l12">
		<div class="card">
			<ul class="collection with-header">
				<li class="collection-header">
					<h5 class="report-work-title" style="display:inline-block;" align="left">Project Activities</h5>
		      <a class="waves-effect waves-light btn right" style="margin-top:12px;"
		      	ng-if="project.definition.details.project_status === 'new'"
		      	ng-click="project.addActivity()"><i class="material-icons left">add_circle_outline</i>Add New Activity</a>
				</li>

				<li class="collection-item avatar" ng-repeat="activity in project.definition.activities track by $index">
					
					<!-- form -->

		      <div class="row" ng-if="$index > 0 && project.definition.details.project_status === 'new'">
		      	<a class="waves-effect waves-light btn red lighten-2 right" style="margin-top:12px;" ng-click="project.removeActivity($index)"><i class="material-icons left">remove_circle_outline</i>Remove Activity</a>
		      </div>

		      <div class="row">

		        <div class="input-field col s12 m4">
					    <select id="ngm-activity-type-{{$index}}" class="validate"
					    	ng-model="activity.activity_type" 
					    	ng-disabled="project.definition.details.project_status !== 'new'" required>
					      <option value="" disabled selected>Select Activity</option>
					      <option value="bphs">BPHS</option>
								<option value="conflict">Conflict/IDPs</option>
					      <option value="emergency">Emergency</option>
					      <option value="outbreaks">Outbreak</option>
					      <option value="routine">Routine PHC</option>
					      <option value="training">Training</option>
					    </select>
					    <label for="ngm-activity-type-{{$index}}">Activity Type</label>
		        </div>

		        <div class="input-field col s12 m8">
		          <input id="ngm-activity-description-{{$index}}" type="text" class="validate"
		          	ng-model="activity.activity_description"
		          	ng-disabled="project.definition.details.project_status !== 'new'"
								required>
		          <label for="ngm-activity-description-{{$index}}">Activity Descritpion</label>
		        </div>

			    </div>

	      	<div class="row">
	      		<div class="card" style="padding: 20px;">
			      	<h5 class="report-work-title" style="font-size:1.4rem;">Beneficiaries</h5>

			      	<div class="row">
			      		
			      		<div class="input-field col s12 m3">
				          <input id="ngm-project-under5male-{{$index}}" type="number" class="validate" min="0"
				          	ng-model="activity.beneficiaries.under5male"
				          	ng-disabled="project.definition.details.project_status === 'complete'"
										required>
				          <label for="ngm-project-under5male-{{$index}}">Under 5 Male</label>
			      		</div>

			      		<div class="input-field col s12 m3">
				          <input id="ngm-project-under5female-{{$index}}" type="number" class="validate" min="0"
				          	ng-model="activity.beneficiaries.under5female"
				          	ng-disabled="project.definition.details.project_status === 'complete'"
										required>
				          <label for="ngm-project-under5female-{{$index}}">Under 5 Female</label>			      		
			      		</div>

			      		<div class="input-field col s12 m3">
				          <input id="ngm-project-over5male-{{$index}}" type="number" class="validate" min="0"
				          	ng-model="activity.beneficiaries.over5male"
				          	ng-disabled="project.definition.details.project_status === 'complete'"
										required>
				          <label for="ngm-project-over5male-{{$index}}">Over 5 Male</label>			      		
			      		</div>

			      		<div class="input-field col s12 m3">
				          <input id="ngm-project-over5female-{{$index}}" type="number" class="validate" min="0"
				          	ng-model="activity.beneficiaries.over5female"
				          	ng-disabled="project.definition.details.project_status === 'complete'"
										required>
				          <label for="ngm-project-over5female-{{$index}}">Over 5 Female</label>			      		
			      		</div>

			      	</div>
	      		</div>
	      	</div>

		      <div class="row">

		      	<div class="card" style="padding: 20px;">

			      	<h5 class="report-work-title" style="font-size:1.4rem;">Activity Locations</h5>

			      	<div class="row" ng-if="project.definition.details.project_status === 'new'">

			      		<div class="input-field col s12 m3"
			      			ng-class="{ 'error-label': healthProjectForm.$submitted 
							  								&& !activity.selection.province 
							  								&& project.definition.activities[0].locations.length == 0 }">
			      			<select id="ngm-project-province-{{$index}}" class="validate"
							    	ng-model="activity.selection.province"
							    	ng-change="project.locationDropdowns($index, '#ngm-project-district-{{$index}}', 'district')"
			      				ng-options="item as item.prov_name for item in project.options.provinces track by item.prov_code"
							    	required>
			      				<option value="" disabled selected>Choose Province</option>
			      			</select>
			      			<label>Province</label>
			      		</div>

			      		<div class="input-field col s12 m3"
			      			ng-class="{ 'error-label': healthProjectForm.$submitted 
							  								&& !activity.selection.district 
							  								&& project.definition.activities[0].locations.length == 0 }">
			      			<select id="ngm-project-district-{{$index}}" class="validate"
							    	ng-model="activity.selection.district"
							    	ng-change="project.locationDropdowns($index, '#ngm-project-hf_type-{{$index}}', 'hf_type')"
			      				ng-options="item as item.dist_name for item in project.options.select.districts track by item.dist_code"
			      				disabled
							    	required>
			      				<option value="" disabled selected>Choose District</option>
			      			</select>
			      			<label>District</label>
			      		</div>

							  <div class="input-field col s12 m3"
							  	ng-class="{ 'error-label': healthProjectForm.$submitted 
							  								&& !activity.selection.hf_type 
							  								&& project.definition.activities[0].locations.length == 0 }">
							    <select id="ngm-project-hf_type-{{$index}}" class="validate"
							    	ng-model="activity.selection.hf_type"
							    	ng-change="project.locationDropdowns($index, '#ngm-project-hf_name-{{$index}}', 'hf_name')"
							    	ng-options="item as item.fac_type for item in project.options.hf_type track by item.id"
							    	disabled
							    	required>
							      <option value="" disabled selected>Choose facility type</option>
							    </select>
							    <label>Facility Type</label>
							  </div>

							  <div class="input-field col s12 m3"
							  	ng-class="{ 'error-label': healthProjectForm.$submitted 
							  								&& !activity.selection.hf_name 
							  								&& project.definition.activities[0].locations.length == 0 }">
							    <select id="ngm-project-hf_name-{{$index}}"  class="validate"
							    	ng-model="activity.selection.hf_name"
							    	ng-change="project.addLocation($index)"
							    	ng-options="item as item.fac_name for item in project.options.select.hf_name track by item.fac_id"
							    	disabled
							    	required>
							      <option value="" disabled selected>Choose facility name</option>
							    </select>
							    <label>Facility Name</label>
							  </div>

							</div>

						  <h5 class="report-work-title" style="font-size:1.1rem;">{{ activity.locations.length }} Selected Locations</h5>

			      	<!-- table for location -->
				      <table class="centered" style="margin-left:10px; width:98%">
				        <tbody>
				          <tr ng-repeat="location in activity.locations track by $index">
				          	<td width="5%"><i class="material-icons" style="color: teal;">location_on</i></td>
				            <td width="22%">{{ location.prov_name }}</td>
				            <td width="22%">{{ location.dist_name }}</td>
				            <td width="22%">{{ location.fac_type }}</td>
				            <td width="22%">{{ location.fac_name }}</td>
				            <td width="5%"><a class="waves-effect waves-light btn red lighten-2" 
				            	ng-if="project.definition.details.project_status === 'new'"
				            	ng-click="project.removeLocation($parent.$index, $index)"><i class="material-icons">cancel</i></a></td>
				          </tr>
				        </tbody>
				      </table>

				    </div>

		      </div>

				</li>
			</ul>

		</div>
	</div>
</div>