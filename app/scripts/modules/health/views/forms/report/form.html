
<!-- list modal -->
<div id="list-modal" class="modal">
  <div class="modal-content">
    <h4 style="color: #2196F3; font-weight:100; padding-bottom: 10px;"><i class="material-icons left">info_outline</i>Cancel Monthly Report</h4>
    <p>Are you sure you want to return to Reports List?</p>
    <p>All edits will be lost...</p>
  </div>
  <div class="modal-footer">
  	<a class=" modal-action modal-close waves-effect waves-green btn-flat">No</a>
    <a ng-click="project.cancel()" class=" modal-action modal-close waves-effect waves-green btn-flat">Yes, abandon changes!</a>
  </div>
</div>

<div id="complete-modal" class="modal">
  <div class="modal-content">
    <h4 style="color: #2196F3; font-weight:100; padding-bottom: 10px;"><i class="material-icons left">info_outline</i>Submit Monthly Report for {{ project.titleFormat }}</h4>
    <p>Are you sure you want to submit this monthly report for {{ project.titleFormat }}?</p>
  </div>
  <div class="modal-footer">
  	<a class=" modal-action modal-close waves-effect waves-green btn-flat">No</a>
    <a ng-click="project.save( true )" class=" modal-action modal-close waves-effect waves-green btn-flat">Yes, submit report!</a>
  </div>
</div>

<!--  -->
<div class="row">
	<div class="col s12 m12 l12">
		<div style="padding:20px;">
			
			<!--  -->
			<button class="waves-effect waves-light btn" ng-click="project.modalConfirm( 'list-modal' )">
				<i class="material-icons left">keyboard_return</i>Back to Project Reports
			</button>

			<span class="right" style="padding-top:8px;">Last Updated: {{ project.updatedAt }}</span>

		</div>
	</div>
</div>

<!-- Project form -->
<form name="healthReportForm" class="col s12 m12 l12" style="padding:0px;" novalidate>

	<fieldset ng-disabled="
		project.definition.organization !== project.user.organization && project.user.roles.indexOf('ADMIN') === -1
	">
		
		<!-- Project beneficiaries details -->
		<div class="slide-animate" ng-include="project.locationsUrl"></div>

		<!-- Project beneficiaries details -->
		<div class="slide-animate" ng-include="project.notesUrl"></div>

		<!-- form submission -->
		<div class="row remove" ng-if="project.report.report_status !== 'complete'">
			<div class="col s12 m12 l12">
				<div class="widget card-panel white grey-text text-darken-2">			
					
					<!-- submission -->
					<div align="center" >
						
						<button data-target="save-modal" class="waves-effect waves-light btn"
							ng-click="project.save( false )"
							ng-disabled="
										( healthReportForm.$pristine ) ||
										( healthReportForm.$invalid ) ||
										( !project.formComplete() ) ||
										( project.report.submit ) ||
										( healthReportForm.$submitted && healthReportForm.$invalid )"
							ng-cloak><i class="material-icons right">send</i>Save</button>

						<!-- cancel new -->
						<button class="waves-effect waves-light btn grey" 
							ng-click="project.modalConfirm( 'list-modal' )">
							Cancel
						</button>

						<br/>
						<br/>

						<button class="waves-effect waves-light btn blue"
							ng-click="project.modalConfirm( 'complete-modal' )"
							ng-disabled="!project.formComplete()"
							ng-cloak><i class="material-icons left">assignment_turned_in</i>Submit Monthly Report
						</button>

					</div>

				</div>
			</div>
		</div>
		
	</fieldset>

</form>

