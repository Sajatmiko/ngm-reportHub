
<!-- bind html -->
<div class="row">
	<div class="col s12 m12 l12">
		<div class="card">
			<ul class="collection with-header">
				<li class="collection-header"><h5 class="report-work-title">Project Financial Tracking</h5></li>
				<li class="collection-item avatar" >
					
					<!-- form -->
	      	<div class="row" ng-if="project.definition.details.project_status !== 'complete'">

		        <div class="input-field col s12 m3"
							ng-class="{ 'error-label': healthProjectFinancialsForm.$submitted 
					  								&& project.definition.financials.length === 0 }">
					    <select id="ngm-beneficiary-category" class="validate"
					    	ng-model="project.options.selection.expenditure"
					    	ng-change="project.addFinancialItem()"
					    	ng-disabled="project.definition.details.project_status === 'complete'"
					    	ng-options="item as item.expenditure_name for item in project.options.list track by item.expenditure_item">
					      <option value="" disabled selected>Select Category to Add Item</option>
					    </select>
					    <label>Expenditure Item</label>
		        </div>

	      	</div>

	      	<div ng-repeat="item in project.definition.financials track by $index">

	      	<div class="row">

	      		<div class="card" style="padding: 20px;">

			      	<div class="row">

			      		<div class="input-field col s12">
				          <input id="ngm-expenditure-item-{{$index}}" type="text" class="validate"
				          	ng-model="item.expenditure_name"
				          	disabled>
				          <label for="ngm-expenditure-item-{{$index}}">Expenditure Item no. {{ $index+1 }}</label>
			      		</div>

			      		<a class="waves-effect waves-light btn red lighten-2" style="position:absolute; margin-left:-06rem;"
		            	ng-if="item.status === 'new'"
		            	ng-click="project.removeFinancialItem($index)"><i class="material-icons">cancel</i></a>			      		

			      	</div>

		      		<div class="row">

			      		<div class="input-field col s12 m3"
			      			ng-class="{ 'error-label': healthProjectFinancialsForm.$submitted && !item.expenditure_status }">
							    <select id="ngm-expenditure-status-{{$index}}" class="validate"
							    	ng-model="item.expenditure_status" 
							    	ng-disabled="project.definition.details.project_status === 'complete'" 
							    	required>
							      <option value="" disabled selected>Select Expenditure Status</option>
							      <option value="encumbered">Encumbered</option>
							      <option value="expenditure">Expenditure</option>
							    </select>
						    	<label for="ngm-expenditure-status-{{$index}}">Expenditure Status</label>
		      			</div>

			      		<div class="input-field col s12 m3">
				          <input id="ngm-expenditure-budget-{{$index}}" type="number" class="validate" min="0"
				          	ng-model="item.expenditure_budget"
				          	ng-disabled="project.definition.details.project_status === 'complete'"
										required>
				          <label for="ngm-expenditure-budget-{{$index}}">Budget (USD)</label>
			      		</div>		      		

			      		<div class="input-field col s12 m3">
				          <input id="ngm-expenditure-start-date-{{$index}}" type="text" class="datepicker"
				          	ng-disabled="project.definition.details.project_status === 'complete'"
										required>
				          <label for="ngm-expenditure-start-date-{{$index}}">Start Date</label>      		
			      		</div>

			      		<div class="input-field col s12 m3">
				          <input id="ngm-expenditure-end-date-{{$index}}" type="text" class="datepicker"
				          	ng-disabled="project.definition.details.project_status === 'complete'"
										required>
				          <label for="ngm-expenditure-end-date-{{$index}}">End Date</label>	      		
			      		</div>

		      		</div>

		      	</div>

		      </div>

				</li>
			</ul>

		</div>
	</div>
</div>
